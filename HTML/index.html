<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responsive Login & Registration</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #84fab0, #8fd3f4);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 20px;
}

.auth-container {
  background: #fff;
  padding: 35px 40px;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  width: 100%;
  max-width: 400px;
  position: relative;
  overflow: hidden;
  transition: all 0.4s ease;
}

h2 {
  text-align: center;
  margin-bottom: 25px;
  font-weight: bold;
  color: #333;
}

.form-control {
  margin-bottom: 18px;
  border-radius: 10px;
  padding: 12px;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
}

.btn-primary {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  border-radius: 10px;
  background: #4CAF50;
  border: none;
  transition: 0.3s;
}

.btn-primary:hover {
  background: #45a049;
  transform: scale(1.02);
}

.toggle-link {
  text-align: center;
  margin-top: 15px;
  cursor: pointer;
  color: #007bff;
  transition: 0.3s;
}

.toggle-link:hover {
  text-decoration: underline;
}

.alert {
  padding: 10px;
  font-size: 14px;
  border-radius: 8px;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.alert.show {
  opacity: 1;
}

.position-relative { position: relative; }

.show-password {
  position: absolute;
  right: 15px;
  top: 12px;
  cursor: pointer;
  color: #888;
  font-size: 18px;
}

@media (max-width: 480px) {
  .auth-container {
    padding: 25px 20px;
    width: 100%;
    border-radius: 15px;
  }
  .btn-primary { padding: 10px; font-size: 14px; }
  .show-password { top: 10px; right: 10px; }
}
@media (max-width: 350px) {
  .auth-container { padding: 20px 15px; }
}
</style>
</head>
<body>

<div class="auth-container">
  <!-- Registration Form -->
  <div id="register-form">
    <h2>Register</h2>
    <div id="register-msg" class="alert"></div>
    <input type="email" id="reg-email" class="form-control" placeholder="Email" required>
    <div class="position-relative">
      <input type="password" id="reg-password" class="form-control" placeholder="Password" required>
      <i class="bi bi-eye-slash show-password" onclick="togglePassword('reg-password')"></i>
    </div>
    <button onclick="register()" class="btn btn-primary">Register</button>
    <div class="toggle-link" onclick="toggleForms()">Already have an account? Login</div>
  </div>

  <!-- Login Form -->
  <div id="login-form" style="display:none;">
    <h2>Login</h2>
    <div id="login-msg" class="alert"></div>
    <input type="email" id="login-email" class="form-control" placeholder="Email" required>
    <div class="position-relative">
      <input type="password" id="login-password" class="form-control" placeholder="Password" required>
      <i class="bi bi-eye-slash show-password" onclick="togglePassword('login-password')"></i>
    </div>
    <button onclick="login()" class="btn btn-primary">Login</button>
    <div class="toggle-link" onclick="toggleForms()">Don't have an account? Register</div>
  </div>
</div>

<script>
function togglePassword(id){
  const input = document.getElementById(id);
  const icon = input.nextElementSibling;
  if(input.type === 'password'){
    input.type = 'text';
    icon.classList.remove('bi-eye-slash');
    icon.classList.add('bi-eye');
  } else {
    input.type = 'password';
    icon.classList.remove('bi-eye');
    icon.classList.add('bi-eye-slash');
  }
}

function toggleForms() {
  const loginForm = document.getElementById('login-form');
  const regForm = document.getElementById('register-form');
  loginForm.style.display = loginForm.style.display === 'none' ? 'block' : 'none';
  regForm.style.display = regForm.style.display === 'none' ? 'block' : 'none';
  clearMessages();
}

function clearMessages() {
  document.getElementById('register-msg').className = 'alert';
  document.getElementById('login-msg').className = 'alert';
  document.getElementById('register-msg').innerHTML = '';
  document.getElementById('login-msg').innerHTML = '';
}

function showMessage(element, message, type='success') {
  const msgDiv = document.getElementById(element);
  msgDiv.className = `alert alert-${type} show`;
  msgDiv.innerHTML = message;
  setTimeout(()=> { msgDiv.classList.remove('show'); }, 3000);
}

function validateEmail(email) {
  const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return re.test(email);
}

function validatePassword(password) {
 
  const re = /^[A-Za-z0-9@$!%*?&-]{6,}$/;
  return re.test(password);
}


function register() {
  const email = document.getElementById('reg-email').value.trim();
  const password = document.getElementById('reg-password').value;

  if(email === '' || password === '') { 
    showMessage('register-msg', 'Please fill all fields', 'danger'); 
    return; 
  }
  if(!validateEmail(email)){ 
    showMessage('register-msg', 'Invalid email format', 'danger'); 
    return; 
  }
  if(!validatePassword(password)){ 
    showMessage('register-msg', 'Password must have at least 6 chars, 1 uppercase, 1 lowercase, 1 number & 1 special char', 'danger'); 
    return; 
  }

  let users = JSON.parse(localStorage.getItem('users')) || [];
  if(users.some(u => u.email === email)) { 
    showMessage('register-msg', 'Email already registered', 'danger'); 
    return; 
  }

  users.push({email, password});
  localStorage.setItem('users', JSON.stringify(users));
  showMessage('register-msg', 'Registered successfully! Redirecting to login...', 'success');

  document.getElementById('reg-email').value = '';
  document.getElementById('reg-password').value = '';

  setTimeout(toggleForms, 1500);
}

function login() {
  const email = document.getElementById('login-email').value.trim();
  const password = document.getElementById('login-password').value;

  let users = JSON.parse(localStorage.getItem('users')) || [];
  let user = users.find(u => u.email === email && u.password === password);

  if(user) {
    showMessage('login-msg', 'Login successful! Redirecting...', 'success');
    localStorage.setItem('currentUser', email);
    setTimeout(()=> { window.location.href = 'index1.html'; }, 1500);
  } else {
    showMessage('login-msg', 'Invalid email or password', 'danger');
  }
}
</script>

</body>
</html>  